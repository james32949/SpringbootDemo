<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<base th:href="@{/}">
<head>
<meta charset="UTF-8">
<title>My Page</title>
<link th:insert="~{/front-end/htmlfile/css.html}" />


</head>

<body class="main-layout">


	<th:block link th:insert="~{/front-end/htmlfile/content1.html}" />
	<div th:fragment="content">

		<div class="news-section">
			<div class="container">
				<!-- 東西從這裡放 -->
				<div style="width: 100%; display: flex; justify-content: center;">

		<div class="card mb-3" style="width: 300px; min-width: 300px; height:292px;">
			<h3 class="card-header">會員專區</h3>
			<ul class="list-group list-group-flush">
				<li class="list-group-item">個人資料</li>
				<li class="list-group-item">訂房查詢</li>
				<li class="list-group-item">活動訂單</li>
				<li class="list-group-item">餐廳訂位</li>
				<li class="list-group-item">宴會聽</li>
			</ul>
			<div class="card-footer text-muted">JoyfulResort</div>
		</div>



		<div class="card" style="max-width: 600px; min-width: 600px;">
			<div class="card-header">
				<h3>個人資料</h3>
			</div>

			<div class="card-body">
				<form th:action="@{/frontend/member/userUpData}" method="post" enctype="multipart/form-data">
					<div class="input-group mb-3">
						<div style="width: 100%; display: flex;">
							<div id="preview" style=" height: 150px; width: 150px; float: left;"><img class="img-thumbnail"
									th:src="@{/member/DBReader}+'?memberID='+${memberData.memberId}"></div>
							<div>
								<div class="input-group mb-3" style="float: left;">
									<span class="input-group-text">會員帳號</span> <span style="width: auto;" class="input-group-text"
										th:text="${memberData.memberAccount}"></span>
								</div>
								<div class="input-group mb-3" style="width: 300px;">
									<span class="input-group-text">會員名稱</span> <input type="text" id="memberName" name="memberName"
										class="form-control" th:value="${memberData.memberName}"
										aria-label="Amount (to the nearest dollar)">
								</div>
								<div>
									<input id="formFile" name="memberImg" th:fiele="*{memberImg}" class="form-control" type="file"
										style="width: 300px;">
								</div>
							</div>
						</div>
					</div>


					<span id="emailError" style="color: red; float: right;"></span>
					<div class="input-group mb-3" style="flex-shrink: 0; width:400px !important;">
						<span class="input-group-text"><span style="color:red;">*</span>信箱</span>
						<input id="memberEmail" name="memberEmail" type="text" class="form-control"
							th:value="${memberData.memberEmail}">
					</div>
					<span id="phoneError" style="color: red; float: right;"></span>
					<div class="input-group mb-3" style="width:400px !important;">
						<span class="input-group-text"><span style="color:red;">*</span>電話</span> <input id="memberPhone"
							name="memberPhone" type="text" class="form-control" th:value="${memberData.memberPhone}">
					</div>
					<div class="input-group mb-3" style="width: 100%;">
						<span class="input-group-text">地址</span> <input id="memberAddress" name="memberAddress" type="text"
							class="form-control" th:value="${memberData.memberAddress}">

						<span class="input-group-text" style="margin-left: 10px;">生日</span>
						<input type="date" name="memberBirthday" th:value="${memberData.memberBirthday}">

						<span class="input-group-text" style="margin-left: 10px;">性別</span>
						<select name="userGender" th:value="${memberData.memberGender}">
							<option value="0">男</option>
							<option value="1">女</option>
						</select>
					</div>



					<div style="display: flex; justify-content: center;">
						<button id="buttonUpData" type="submit" class="btn btn-secondary">送出修改</button>
					</div>
				</form>

			</div>

		</div>
	</div>





			</div>
		</div>
	</div>
	
	
	<!-- Modal  燈箱 -->
	<div class="modal fade" id="exampleModal" tabindex="-1"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="modal-body"
					style="background-color: #f3f6f9; height: 500px;">
					<div style="text-align: center;">
						<h1 style="color: rgb(0, 174, 255);">
							<b>JoyfulResort</b>
						</h1>
						<h4 class="card-title">
							<b>登入</b>
						</h4>
						<form>
							<div class="input-group mb-3"
								style="width: 100%; height: 60%; display: flex; align-items: center; justify-content: space-around;">

								<div style="width: 80%;">
									<div class="input-group mb-3">
										<input type="text" id="userAccount" name="userAccount" class="form-control"
											placeholder="帳號"
											style="padding-top: 2rem; padding-bottom: 2rem">
									</div>
									
									<span id="AccountErrorMessage" style="color: red;"></span>
									
									<div class="input-group mb-3">
										<input type="Password" id="userPassword" name="userPassword"
											class="form-control" placeholder="密碼"
											style="padding-top: 2rem; padding-bottom: 2rem">
									</div>
									
									<span id="PasswordErrorMessage" style="color: red;"></span>
								</div>
							</div>
							<div>
								<button type="button" id="Button_Login" class="btn btn-outline-primary"
									style="width: 70%; padding-top: 1rem; padding-bottom: 1rem">登入</button>
							</div>
							<span id="errorMessage" style="color: red;"></span>
							<div style="margin-top: 35px;">
								<button type="button" class="btn btn-outline-danger"
									style="width: 100px; folat: left; margin-right: 80px;">忘記密碼?</button>
								<button type="button" id="buttonRegister"
									class="btn btn-outline-success"
									style="width: 100px; folat: right; margin-left: 80px;"
									onclick="location.href='/memberRegister'">註冊</button>
							</div>

						</form>
					</div>
				</div>
				<div class="modal-footer"></div>
			</div>
		</div>
	</div>
	
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<th:block link th:insert="~{/front-end/htmlfile/content2.html}" />
	<th:block link th:insert="~{/front-end/htmlfile/script.html}" />
	
	<script>
	//取得指定Cookie JS無法直接取得指定cookie 的Key-value 需要自己寫function取得 
	function getCookie(cookieName) {  // 自訂function
		const strCookie = document.cookie
		const cookieList = strCookie.split(';')

		for (let i = 0; i < cookieList.length; i++) {
			const arr = cookieList[i].split('=')
			if (cookieName === arr[0].trim()) {
				return arr[1]
			}
		}
	}
	//判斷登入狀態
	$(document).ready(function() { //ready事件
		//判斷後端JAVA 有無寫入登入狀態cookie值 改寫登入/登出按鈕狀態
		if (getCookie('LogInState') != null) { 
			$('#LoginButton').css('display', 'none')
			$('#LogoutButton').css('display', 'block')
		} else {
			$('#LoginButton').css('display', 'blocl')
			$('#LogoutButton').css('display', 'none')
		}
	})
	</script>
	<script th:src="@{/frontend/js/memberLogin.js}"></script>
</body>

</html>